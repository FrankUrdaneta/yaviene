function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}var e,n={};s.m=e=[function(t,i){t.exports={e:"V1.3 20200814",h:1,u:1,f:1,tVideoRenderYV12:1,tVideoRenderRGB:2,tVideoRenderRGBA:3,tOpenStream:1,tCloseStream:2,tFrameData:3,tReOpenStream:4,tConnecting:5,tOpenAudio:6,tCloseAudio:7,tPlayFinished:8,tSpeed:9,tBufferTime:10,tStatus:11,tDecode:12,tVidInterval:13,tPauseStream:14,tResumeStream:15,tSeekStream:16,tMediaInfo:20,tLogInfo:21,tError:100,tExcept:101,tDisconnect:102,WORKER_DOWNLOAD_ID:1,WORKER_DECODE_ID:2,WORKER_RENDER_ID:3,LOG_LEVEL_DEBUG:0,LOG_LEVEL_INFO:1,LOG_LEVEL_ERROR:2,LOG_LEVEL_CURRENT:1,FRM_TYPE_V_HEAD:1,FRM_TYPE_I:2,FRM_TYPE_P:3,FRM_TYPE_A:4,FRM_TYPE_A_HEAD:5,FLV_CODEC_H264:7,FLV_CODEC_HEVC:12,v:0,w:function(i){return new Promise(function(t){return setTimeout(t,i)})},y:function(t,i){this.LOG_LEVEL_CURRENT<=this.LOG_LEVEL_DEBUG&&this.A("info",t,i)},_:function(t,i){this.LOG_LEVEL_CURRENT<=this.LOG_LEVEL_INFO&&this.A("info",t,i)},C:function(t,i){this.LOG_LEVEL_CURRENT<=this.LOG_LEVEL_INFO&&this.A("error",t,i)},A:function(t,i,e){var n,s,r,h,o,a;this.v?(n={cmd:this.tLogInfo,level:t,tag:i,str:e},self.postMessage(n)):(r=(s=new Date).getFullYear(),h=s.getMonth()+1,o=s.getDate(),s.getDay(),a=r+"-"+h+"-"+o+" "+s.getHours()+":"+s.getMinutes()+":"+s.getSeconds(),console.log("["+t+"]["+a+"]["+i+"]:"+e))},g:function(t,i,e){return e<=t-i},D:function(){return(new Date).getTime()},b:function(t){return t>>>8&255|(255&t)<<8},V:function(t){return(4278190080&t)>>>24|(16711680&t)>>>8|(65280&t)<<8|(255&t)<<24},S:function(t,i){return t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]},R:function(){1==this.h&&(this._("cmsv6player",this.e),this.h=0)}}},function(t,i,e){"use strict";function n(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}function s(){this.TAG="IOController",this.x=!0,this.F=393216,this.U=0,this.k=this.F,this.I=3145728,this.M=new ArrayBuffer(this.I),this.O=0,this.L=!1,this.P=!1,this.T=0,this.B=new c,this.z=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this.j=!1,this.G=null,this.N=!1,this.H=0}function a(t,i,e){var n=t;if(i+e<n.length){for(;e--;)if(128!=(192&n[++i]))return;return 1}}function r(t){for(var i,e,n,s=[],r=t,h=0,o=t.length;h<o;)if(r[h]<128)s.push(String.fromCharCode(r[h])),++h;else{if(!(r[h]<192))if(r[h]<224){if(a(r,h,1)&&128<=(i=(31&r[h])<<6|63&r[h+1])){s.push(String.fromCharCode(65535&i)),h+=2;continue}}else if(r[h]<240){if(a(r,h,2)&&2048<=(e=(15&r[h])<<12|(63&r[h+1])<<6|63&r[h+2])&&55296!=(63488&e)){s.push(String.fromCharCode(65535&e)),h+=3;continue}}else if(r[h]<248&&a(r,h,3)&&65536<(n=(7&r[h])<<18|(63&r[h+1])<<12|(63&r[h+2])<<6|63&r[h+3])&&n<1114112){n-=65536,s.push(String.fromCharCode(n>>>10|55296)),s.push(String.fromCharCode(1023&n|56320)),h+=4;continue}s.push(String.fromCharCode(65533)),++h}return s.join("")}function h(){this.W=null,this.Y=null,this.K=null,this.q=null,this.J=null,this.Q=null,this.X=null,this.Z=null,this.$=null,this.tt=null,this.it=null,this.et=null,this.nt=null,this.st=null,this.rt=null,this.ht=null,this.ot=null,this.at=null,this.lt=null,this.ut=null,this.ft=null,this.ct=null,this.dt=null,this.vt=null}function o(t){this.TAG="ExpGolomb",this._buffer=t,this._buffer_index=0,this._total_bytes=t.byteLength,this._total_bits=8*t.byteLength,this._current_word=0,this._current_word_bits_left=0}function z(){}function A(){}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function l(i){return typeof i}:function l(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},l(t)}function u(t){var i;this.TAG="FLVDemuxer",this.wt=null,this.pt=null,this.mt=null,this.yt=!0,this.At=!1,this.K=t.hasAudioTrack,this.q=t.hasVideoTrack,this._t=!1,this.Ct=0,this.gt=!1,this.Dt=!1,this.bt=!1,this.Et=!1,this.Vt=new v,this.Vt.K=this.K,this.Vt.K=this.q,this.ut=null,this.St=null,this.Rt=null,this.xt=null,this.Ft=4,this.Ut=0,this.kt=1e3,this.Y=0,this.It=!1,this.Mt={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this.Ot=[5500,11025,22050,44100,48e3],this.Lt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this.Pt=[44100,48e3,32e3,0],this.Tt=[22050,24e3,16e3,0],this.Bt=[11025,12e3,8e3,0],this.zt=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this.jt=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this.Gt=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this.Nt=(i=new ArrayBuffer(2),new DataView(i).setInt16(0,256,!0),256===new Int16Array(i)[0])}var f,V,c,d,v,j,S,_,w,p,m,y;e.r(i),f=e(0),V=e.n(f),n.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},n.prototype.addBytes=function(t){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=t,this._totalBytes+=t):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=t,this._totalBytes+=t):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=t,this._totalBytes+=t,this._lastCheckpoint=this._now())},n.prototype.currentKBps=function(){this.addBytes(0);var t=(this._now()-this._lastCheckpoint)/1e3;return 0==t&&(t=1),this._intervalBytes/t/1024},n.prototype.lastSecondKBps=function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:500<=this._now()-this._lastCheckpoint?this.currentKBps():0},n.prototype.averageKBps=function(){var t=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/t/1024},c=n,s.prototype.Ht=function(){this.M=null,this.U=this.k=this.I=this.O=0,this.B=null,this.j=!1},s.prototype.Wt=function(t){this.U=0,this.O=0,this.B.reset()},s.prototype.Yt=function(t,i){this.Kt(i),this.B.reset(),this.k=this.F},s.prototype.qt=function(t){for(var i,e,n=this.k;n+1048576<t;)n*=2;(n+=1048576)!==this.I&&(i=new ArrayBuffer(n),0<this.U&&(e=new Uint8Array(this.M,0,this.U),new Uint8Array(i,0,n).set(e,0)),this.M=i,this.I=n)},s.prototype.Jt=function(t){var i,e=this.z,n=e.length-1,s=0,r=n;if(t<e[0])return e[0];for(;s<=r;){if((i=s+Math.floor((r-s)/2))===n||t>=e[i]&&t<e[i+1])return e[i];e[i]<t?s=i+1:r=i-1}},s.prototype.Qt=function(t){var i,e=0;8192<(e=this.x||t<512?t:512<=t&&t<=1024?Math.floor(1.5*t):2*t)&&(e=8192),i=1024*e+1048576,this.I<i&&this.qt(i),this.k=1024*e},s.prototype.Xt=function(t,i,e){return this.G(t,i,e)},s.prototype.Zt=function(t,i){var e,n,s,r,h,o,a;this.N||(this.j&&(this.j=!1),this.B.addBytes(t.byteLength),0!==(e=this.B.lastSecondKBps)&&(n=this.Jt(e),this.T!==n&&(this.T=n,this.Qt(n))),0===this.U?(s=this.Xt(t,i,t.byteLength))<t.byteLength&&((r=t.byteLength-s)>this.I&&this.qt(r),new Uint8Array(this.M,0,this.I).set(new Uint8Array(t,s),0),this.U=r,this.O=0):(this.U+t.byteLength>this.I&&this.qt(this.U+t.byteLength),(h=new Uint8Array(this.M,0,this.I)).set(new Uint8Array(t),this.U),this.U+=t.byteLength,(o=this.Xt(this.M,this.O,this.U))<this.U&&0<o&&(a=new Uint8Array(this.M,o),h.set(a,0)),this.U-=o,this.O=0))},s.prototype.Kt=function(t){var i,e,n,s,r;if(0<this.U){if(i=this.M.slice(0,this.U),e=this.Xt(i,this.O),n=i.byteLength-e,e<i.byteLength){if(!t)return 0<e&&(s=new Uint8Array(this.M,0,this._bufferSize),r=new Uint8Array(i,e),s.set(r,0),this.U=r.byteLength,this.O+=e),0;V.a.C(this.TAG,n+" bytes unconsumed data remain when flush buffer, dropped")}return this.U=0,this.O=0,n}return 0},s.prototype.$t=function(){return null!=this.B?this.B.lastSecondKBps():0},d=s,h.prototype.ti=function(){var t=!1===this.K||!0===this.K&&null!=this.J&&null!=this.$&&null!=this.tt,i=!1===this.q||!0===this.q&&null!=this.Q&&null!=this.it&&null!=this.et&&null!=this.nt&&null!=this.st&&null!=this.rt&&null!=this.ht&&null!=this.ot&&null!=this.at&&null!=this.lt;return null!=this.W&&null!=this.Y&&null!=this.ut&&null!=this.dt&&t&&i},h.prototype.ii=function(){return!0===this.dt},h.prototype.ei=function(t){var i,e;return null==this.vt?null:(i=this.vt,{index:e=this.ni(i.times,t),milliseconds:i.times[e],fileposition:i.filepositions[e]})},h.prototype.ni=function(t,i){var e,n=0,s=t.length-1,r=0,h=s;for(i<t[0]&&(n=0,r=h+1);r<=h;){if((e=r+Math.floor((h-r)/2))===s||i>=t[e]&&i<t[e+1]){n=e;break}t[e]<i?r=e+1:h=e-1}return n},v=h,o.prototype.destroy=function(){this._buffer=null},o.prototype._fillCurrentWord=function(){var t,i,e=this._total_bytes-this._buffer_index;if(e<=0)throw new Error("ExpGolomb: _fillCurrentWord() but no bytes available");t=Math.min(4,e),(i=new Uint8Array(4)).set(this._buffer.subarray(this._buffer_index,this._buffer_index+t)),this._current_word=new DataView(i.buffer).getUint32(0,!1),this._buffer_index+=t,this._current_word_bits_left=8*t},o.prototype.readBits=function(t){var i,e,n,s,r;if(32<t)throw new Error("ExpGolomb: readBits() bits exceeded max 32bits!");return t<=this._current_word_bits_left?(i=this._current_word>>>32-t,this._current_word<<=t,this._current_word_bits_left-=t,i):(e=this._current_word_bits_left?this._current_word:0,e>>>=32-this._current_word_bits_left,n=t-this._current_word_bits_left,this._fillCurrentWord(),s=Math.min(n,this._current_word_bits_left),r=this._current_word>>>32-s,this._current_word<<=s,this._current_word_bits_left-=s,e<<s|r)},o.prototype.readBool=function(){return 1===this.readBits(1)},o.prototype.readByte=function(){return this.readBits(8)},o.prototype._skipLeadingZero=function(){for(var t=void 0,t=0;t<this._current_word_bits_left;t++)if(0!=(this._current_word&2147483648>>>t))return this._current_word<<=t,this._current_word_bits_left-=t,t;return this._fillCurrentWord(),t+this._skipLeadingZero()},o.prototype.readUEG=function(){var t=this._skipLeadingZero();return this.readBits(t+1)-1},o.prototype.readSEG=function(){var t=this.readUEG();return 1&t?t+1>>>1:-1*(t>>>1)},j=o,z.ebsp2rbsp=function(t){for(var i=t,e=i.byteLength,n=new Uint8Array(e),s=0,r=0;r<e;r++)2<=r&&3===i[r]&&0===i[r-1]&&0===i[r-2]||(n[s]=i[r],s++);return new Uint8Array(n.buffer,0,s)},z.parseSPS=function(t){var i,e,n,s,r,h,o,a,l,u,f,c,d,v,w,p,m,y,A,_,C,g,D,b,E,V,S,R,x,F,U,k,I,M,O,L,P,T=z.ebsp2rbsp(t),B=new j(T);if(B.readByte(),i=B.readByte(),B.readByte(),e=B.readByte(),B.readUEG(),n=z.getProfileString(i),s=z.getLevelString(e),r=1,o=[0,h=420,422,444],a=8,(100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i||138===i||144===i)&&(3===(r=B.readUEG())&&B.readBits(1),r<=3&&(h=o[r]),a=B.readUEG()+8,B.readUEG(),B.readBits(1),B.readBool()))for(l=3!==r?8:12,u=0;u<l;u++)B.readBool()&&z.skipScalingList(B,u<6?16:64);if(B.readUEG(),0===(f=B.readUEG()))B.readUEG();else if(1===f)for(B.readBits(1),B.readSEG(),B.readSEG(),c=B.readUEG(),d=0;d<c;d++)B.readSEG();return v=B.readUEG(),B.readBits(1),w=B.readUEG(),p=B.readUEG(),0===(m=B.readBits(1))&&B.readBits(1),B.readBits(1),C=_=A=y=0,B.readBool()&&(y=B.readUEG(),A=B.readUEG(),_=B.readUEG(),C=B.readUEG()),D=g=1,E=!(b=0),S=V=0,B.readBool()&&(B.readBool()&&(x=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<(R=B.readByte())&&R<16?(g=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][R-1],D=x[R-1]):255===R&&(g=B.readByte()<<8|B.readByte(),D=B.readByte()<<8|B.readByte())),B.readBool()&&B.readBool(),B.readBool()&&(B.readBits(4),B.readBool()&&B.readBits(24)),B.readBool()&&(B.readUEG(),B.readUEG()),B.readBool()&&(F=B.readBits(32),U=B.readBits(32),E=B.readBool(),b=(V=U)/(S=2*F))),k=1===g&&1===D?1:g/D,M=(I=0)===r?(I=1,2-m):(I=3===r?1:2,(1===r?2:1)*(2-m)),O=16*(w+1),L=16*(p+1)*(2-m),O-=(y+A)*I,L-=(_+C)*M,P=Math.ceil(O*k),B.destroy(),B=null,{profile_string:n,level_string:s,bit_depth:a,ref_frames:v,chroma_format:h,chroma_format_string:z.getChromaFormatString(h),frame_rate:{fixed:E,fps:b,fps_den:S,fps_num:V},sar_ratio:{width:g,height:D},codec_size:{width:O,height:L},present_size:{width:P,height:L}}},z.skipScalingList=function(t,i){for(var e=8,n=8,s=0;s<i;s++)0!==n&&(n=(e+t.readSEG()+256)%256),e=0===n?e:n},z.getProfileString=function(t){switch(t){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},z.getLevelString=function(t){return(t/10).toFixed(1)},z.getChromaFormatString=function(t){switch(t){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},S=z,y=new ArrayBuffer(2),new DataView(y).setInt16(0,256,!0),_=256===new Int16Array(y)[0],A.parseScriptData=function(t,i,e){var n,s,r={};try{n=A.parseValue(t,i,e),s=A.parseValue(t,i+n.size,e-n.size),r[n.data]=s.data}catch(h){V.a.C("AMF",h.toString())}return r},A.parseObject=function(t,i,e){var n,s,r;if(e<3)throw new Error("Data not enough when parse ScriptDataObject");return n=A.parseString(t,i,e),r=(s=A.parseValue(t,i+n.size,e-n.size)).objectEnd,{data:{name:n.data,value:s.data},size:n.size+s.size,objectEnd:r}},A.parseVariable=function(t,i,e){return A.parseObject(t,i,e)},A.parseString=function(t,i,e){var n;if(e<2)throw new Error("Data not enough when parse String");return{data:0<(n=new DataView(t,i,e).getUint16(0,!_))?r(new Uint8Array(t,i+2,n)):"",size:2+n}},A.prototype.parseLongString=function(t,i,e){var n;if(e<4)throw new Error("Data not enough when parse LongString");return{data:0<(n=new DataView(t,i,e).getUint32(0,!_))?r(new Uint8Array(t,i+4,n)):"",size:4+n}},A.parseDate=function(t,i,e){var n,s;if(e<10)throw new Error("Data size invalid when parse Date");return s=(n=new DataView(t,i,e)).getFloat64(0,!_),s+=60*n.getInt16(8,!_)*1e3,{data:new Date(s),size:10}},A.parseValue=function(t,i,e){var n,s,r,h,o,a,l,u,f,c,d,v,w,p,m;if(e<1)throw new Error("Data not enough when parse Value");s=1,r=(n=new DataView(t,i,e)).getUint8(0),h=void 0,o=!1;try{switch(r){case 0:h=n.getFloat64(1,!_),s+=8;break;case 1:h=!!n.getUint8(1),s+=1;break;case 2:h=(a=A.parseString(t,i+1,e-1)).data,s+=a.size;break;case 3:for(h={},l=0,9==(16777215&n.getUint32(e-4,!_))&&(l=3);s<e-4&&!(u=A.parseObject(t,i+s,e-s-l)).objectEnd;)h[u.data.name]=u.data.value,s+=u.size;s<=e-3&&9==(16777215&n.getUint32(s-1,!_))&&(s+=3);break;case 8:for(h={},s+=4,f=0,9==(16777215&n.getUint32(e-4,!_))&&(f=3);s<e-8&&!(c=A.parseVariable(t,i+s,e-s-f)).objectEnd;)h[c.data.name]=c.data.value,s+=c.size;s<=e-3&&9==(16777215&n.getUint32(s-1,!_))&&(s+=3);break;case 9:h=undefined,s=1,o=!0;break;case 10:for(h=[],d=n.getUint32(1,!_),s+=4,v=0;v<d;v++)w=A.parseValue(t,i+s,e-s),h.push(w.data),s+=w.size;break;case 11:h=(p=A.parseDate(t,i+1,e-1)).data,s+=p.size;break;case 12:h=(m=A.parseString(t,i+1,e-1)).data,s+=m.size;break;default:s=e,V.a.y("AMF","Unsupported AMF value type "+r)}}catch(y){V.a.C("AMF",y.toString())}return{data:h,size:s,objectEnd:o}},w=A,u.prototype.destroy=function(){this.Vt=null,this.ut=null,this.St=null,this.Rt=null,this.wt=null,this.pt=null,this._onDataAvailable=null},u.prototype.resetMediaInfo=function(){this.Vt=new v},u.prototype._isInitialMetadataDispatched=function(){return this.K&&this.q?this.Et:this.K&&!this.q?this.bt:!(this.K||!this.q)&&this.Et},u.prototype.si=function(t,i,e){var n,s,r,h,o,a,l,u,f=i,c=this.Nt;for(this.yt&&(this.yt=!1,0!==new DataView(t,f,4).getUint32(0,!c)&&V.a._(this.TAG,"PrevTagSize0 !== 0 !!!"),f+=4);f<e&&(this.At=!0,n=new DataView(t,f,e-f),!(e<f+11+4))&&(s=n.getUint8(0),!(e<f+11+(r=16777215&n.getUint32(0,!c))+4));)if(8===s||9===s||18===s){switch(h=n.getUint8(4),o=n.getUint8(5),a=n.getUint8(6)|o<<8|h<<16|n.getUint8(7)<<24,0!=(16777215&n.getUint32(7,!c))&&V.a._(this.TAG,"Meet tag which has StreamID != 0!"),l=f+11,s){case 8:this.ri(t,l,r,a);break;case 9:this.hi(t,l,r,a,i+f);break;case 18:this.oi(t,l,r);break;default:V.a._(this.TAG,"parseChunks unkown tag type="+s)}(u=n.getUint32(11+r,!c))!==11+r&&V.a._(this.TAG,"Invalid PrevTagSize "+u),f+=11+r+4}else V.a._(this.TAG,"Unsupported tag type "+s+", skipped"),f+=11+r+4;return f},u.prototype.oi=function(t,i,e){var n,s,r,h,o,a=w.parseScriptData(t,i,e);if(a.hasOwnProperty("onMetaData")){if(null==a.onMetaData||"object"!==l(a.onMetaData))return void V.a._(this.TAG,"Invalid onMetaData structure!");this.ut&&V.a._(this.TAG,"Found another onMetaData tag!"),this.ut=a,"boolean"==typeof(n=this.ut.onMetaData).hasAudio&&!1===this.gt&&(this.K=n.hasAudio,this.Vt.K=this.K),"boolean"==typeof n.hasVideo&&!1===this.Dt&&(this.q=n.hasVideo,this.Vt.q=this.q),"number"==typeof n.audiodatarate&&(this.Vt.X=n.audiodatarate),"number"==typeof n.videodatarate&&(this.Vt.Z=n.videodatarate),"number"==typeof n.width&&(this.Vt.it=n.width),"number"==typeof n.height&&(this.Vt.et=n.height),"number"==typeof n.duration?this.It||(s=Math.floor(n.duration*this.kt),this.Y=s,this.Vt.Y=s):this.Vt.Y=0,"number"==typeof n.framerate&&0<(r=Math.floor(1e3*n.framerate))&&(h=r/1e3,this.Mt.fixed=!0,this.Mt.fps=h,this.Mt.fps_num=r,this.Mt.fps_den=1e3,this.Vt.nt=h),"object"===l(n.keyframes)?(this.Vt.dt=!0,o=n.keyframes,this.Vt.vt=this.ai(o),n.keyframes=null):this.Vt.dt=!1,this.At=!1,this.Vt.ut=n,V.a.y(this.TAG,"metadata d="+this.Y+",v="+this.q+",a="+this.K)}},u.prototype.ai=function(t){for(var i,e=[],n=[],s=1;s<t.times.length;s++)i=this.Ut+Math.floor(1e3*t.times[s]),e.push(i),n.push(t.filepositions[s]);return{times:e,filepositions:n}},u.prototype.ri=function(t,i,e,n){var s,r,h,o,a,l,u,f,c;e<=1?V.a._(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!"):!0===this.gt&&!1===this.K||(this.Nt,10==(r=(s=new DataView(t,i,e).getUint8(0))>>>4)?0<=(o=(12&s)>>>2)&&o<=4?(h=this.Ot[o],a=1&s,(l=this.St)||(!1===this.K&&!1===this.gt&&(this.K=!0,this.Vt.K=!0),(l=this.St={}).type="audio",l.id=1,l.timescale=this.kt,l.duration=this.Y,l.audioSampleRate=h,l.channelCount=0==a?1:2),(u=this.li(t,i+1,e-1))!=undefined&&(0===u.packetType?(l.config,f=u.data,l.audioSampleRate=f.samplingRate,l.channelCount=f.channelCount,l.codec=f.codec,l.originalCodec=f.originalCodec,l.config=f.config,l.refSampleDuration=1024/l.audioSampleRate*l.timescale,this.bt=!0,this.At=!1,(c=this.Vt).J=l.originalCodec,c.$=l.audioSampleRate,c.tt=l.channelCount,c.q?null!=c.Q&&(c.W='video/x-flv; codecs="'+c.Q+","+c.J+'"'):c.W='video/x-flv; codecs="'+c.J+'"',V.a.y(this.TAG,"audio conf rate="+c.$+",chn="+c.tt),this.mt(V.a.FRM_TYPE_A_HEAD,null,c.tt,c.$)):1===u.packetType?(this.mt(V.a.FRM_TYPE_A,u.data,u.data.byteLength,n),this._t=!0):V.a.C(this.TAG,"Flv: Unsupported AAC data type "+u.packetType))):V.a.C("FormatError","Flv: Invalid audio sample rate idx: "+o):V.a.C("CodecUnsupported","Flv: Unsupported audio codec idx: "+r))},u.prototype.li=function(t,i,e){var n,s;if(!(e<=1))return n={},s=new Uint8Array(t,i,e),n.packetType=s[0],0===s[0]?n.data=this.ui(t,i+1,e-1):n.data=t.slice(i+1,i+1+e-1),n;V.a.C(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},u.prototype.ui=function(t,i,e){var n,s,r,h,o,a=new Uint8Array(t,i,e),l=null,u=0,f=null,u=h=a[0]>>>3;if((o=(7&a[0])<<1|a[1]>>>7)<0||o>=this.Lt.length)V.a.C("FormatError","Flv: AAC invalid sampling frequency index!");else{if(n=this.Lt[o],!((s=(120&a[1])>>>3)<0||8<=s))return 5===u&&(f=(7&a[1])<<1|a[2]>>>7,a[2]),-1!==(r=self.navigator.userAgent.toLowerCase()).indexOf("firefox")?f=6<=o?(u=5,l=new Array(4),o-3):(u=2,l=new Array(2),o):-1!==r.indexOf("android")?(u=2,l=new Array(2),f=o):(u=5,f=o,l=new Array(4),6<=o?f=o-3:1==s&&(u=2,l=new Array(2),f=o)),l[0]=u<<3,l[0]|=(15&o)>>>1,l[1]=(15&o)<<7,l[1]|=(15&s)<<3,5===u&&(l[1]|=(15&f)>>>1,l[2]=(1&f)<<7,l[2]|=8,l[3]=0),{config:l,samplingRate:n,channelCount:s,codec:"mp4a.40."+u,originalCodec:"mp4a.40."+h};V.a.C("FormatError","Flv: AAC invalid channel configuration")}},u.prototype.hi=function(t,i,e,n,s){var r,h,o;e<=1?V.a.C(this.TAG,"Flv: Invalid video packet, missing VideoData payload!"):!0===this.Dt&&!1===this.q||(h=(240&(r=new Uint8Array(t,i,e)[0]))>>>4,7==(o=15&r)||12==o?this.fi(t,i+1,e-1,n,s,h,o):V.a.C("CodecUnsupported","Flv: Unsupported codec in video frame: "+o))},u.prototype.fi=function(t,i,e,n,s,r,h){var o,a,l,u;if(e<4)V.a.C(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else if(o=this.Nt,l=(a=new DataView(t,i,e)).getUint8(0),u=(16777215&a.getUint32(0,!o))<<8>>8,0===l)this.ci(t,i+4,e-4,h);else if(1===l)this.di(t,i+4,e-4,n,s,r,u,h);else if(2!==l)return void V.a.C("FormatError","Flv: Invalid video packet type "+l)},u.prototype.ci=function(t,i,e,n){var s;e<7?V.a._(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!"):((s=this.Rt)?"undefined"!=typeof s.avcc&&V.a._(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(!1===this.q&&!1===this.Dt&&(this.q=!0,this.Vt.q=!0),(s=this.Rt={}).type="video",s.id=0,s.timescale=this.kt,s.duration=this.Y),n==V.a.FLV_CODEC_H264?this.vi(t,i,e):this.wi(t,i,e))},u.prototype.vi=function(t,i,e){var n,s,r,h,o,a,l,u,f,c,d,v,w,p,m,y,A,_,C,g=this.Nt,D=new DataView(t,i,e),b=D.getUint8(0),E=D.getUint8(1);if(D.getUint8(2),D.getUint8(3),1===b&&0!==E)if(this.Ft=1+(3&D.getUint8(4)),3===this.Ft||4===this.Ft)if(0!=(n=31&D.getUint8(5))){for(1<n&&V.a._(this.TAG,"_parse264AVCConfRecord: Strange AVCDecoderConfigurationRecord: SPS Count = "+n),s=this.Rt,r=6,h=null,o=0;o<n;o++)if(a=D.getUint16(r,!g),r+=2,0!==a&&(h=new Uint8Array(t,i+r,a),r+=a,l=S.parseSPS(h),0===o)){for(s.codecWidth=l.codec_size.width,s.codecHeight=l.codec_size.height,s.presentWidth=l.present_size.width,s.presentHeight=l.present_size.height,s.profile=l.profile_string,s.level=l.level_string,s.bitDepth=l.bit_depth,s.chromaFormat=l.chroma_format,s.sarRatio=l.sar_ratio,s.frameRate=l.frame_rate,!1!==l.frame_rate.fixed&&0!==l.frame_rate.fps_num&&0!==l.frame_rate.fps_den||(s.frameRate=this.Mt),u=s.frameRate.fps_den,f=s.frameRate.fps_num,s.refSampleDuration=s.timescale*(u/f),c=h.subarray(1,4),d="avc1.",v=0;v<3;v++)(w=c[v].toString(16)).length<2&&(w="0"+w),d+=w;s.codec=d,(p=this.Vt).it=s.codecWidth,p.et=s.codecHeight,p.nt=s.frameRate.fps,p.st=s.profile,p.rt=s.level,p.ht=l.ref_frames,p.ot=l.chroma_format_string,p.at=s.sarRatio.width,p.lt=s.sarRatio.height,p.Q=d,p.K?null!=p.J&&(p.W='video/x-flv; codecs="'+p.Q+","+p.J+'"'):p.W='video/x-flv; codecs="'+p.Q+'"',p.ti()}if(0!==(m=D.getUint8(r))){for(1<m&&V.a._(this.TAG,"_parse264AVCConfRecord: Strange AVCDecoderConfigurationRecord: PPS Count = "+m),r++,y=null,A=0;A<m;A++)_=D.getUint16(r,!g),r+=2,0!==_&&(y=new Uint8Array(t,i+r,_),r+=_);s.avcc=new Uint8Array(e),s.avcc.set(new Uint8Array(t,i,e),0),this.Et=!0,this.At=!1,this.xt=new ArrayBuffer(y.byteLength+h.byteLength+8),r=0,(C=new Uint8Array(this.xt)).set([0,0,0,1],r),r+=4,C.set(h,r),r+=h.byteLength,C.set([0,0,0,1],r),r+=4,C.set(y,r),r+=y.byteLength,V.a.y(this.TAG,"video 264 conf avcLen="+this.xt.byteLength+",avcChar="+C),this.mt(V.a.FRM_TYPE_V_HEAD,null,this.Y,0)}else V.a.C("FormatError","_parse264AVCConfRecord: Invalid AVCDecoderConfigurationRecord: No PPS")}else V.a.C("FormatError","_parse264AVCConfRecord: Invalid AVCDecoderConfigurationRecord: No SPS");else V.a.C("FormatError","_parse264AVCConfRecord: Strange NaluLengthSizeMinusOne: "+(this.Ft-1));else V.a.C("FormatError","_parse264AVCConfRecord: Invalid AVCDecoderConfigurationRecord")},u.prototype.wi=function(t,i,e){var n,s,r,h,o,a,l,u,f,c,d,v=this.Nt,w=new DataView(t,i,e);if(1===w.getUint8(0))if(this.Ft=4,n=23,32==w.getUint8(n)){for(n+=1,s=w.getUint16(n,!v),n+=2,r=null,h=0;h<s;h++)o=w.getUint16(n,!v),n+=2,0!==o&&(r=new Uint8Array(t,i+n,o),n+=o);if(33==w.getUint8(n)){for(n+=1,a=w.getUint16(n,!v),n+=2,l=null,h=0;h<a;h++)o=w.getUint16(n,!v),n+=2,0!==o&&(l=new Uint8Array(t,i+n,o),n+=o);if(34==w.getUint8(n)){for(n+=1,u=w.getUint16(n,!v),n+=2,f=null,h=0;h<u;h++)o=w.getUint16(n,!v),n+=2,0!==o&&(f=new Uint8Array(t,i+n,o),n+=o);(c=this.Rt).avcc=new Uint8Array(e),c.avcc.set(new Uint8Array(t,i,e),0),this.Et=!0,this.At=!1,this.xt=new ArrayBuffer(r.byteLength+f.byteLength+l.byteLength+12),n=0,(d=new Uint8Array(this.xt)).set([0,0,0,1],n),n+=4,d.set(r,n),n+=r.byteLength,d.set([0,0,0,1],n),n+=4,d.set(l,n),n+=l.byteLength,d.set([0,0,0,1],n),n+=4,d.set(f,n),n+=f.byteLength,V.a.y(this.TAG,"video 265 avcLen="+this.xt.byteLength+",avcChar="+d),this.mt(V.a.FRM_TYPE_V_HEAD,null,this.Y,1)}else V.a.C("FormatError","_parse265AVCConfRecord: Invalid pps type")}else V.a.C("FormatError","_parse265AVCConfRecord: Invalid pps type")}else V.a.C("FormatError","_parse265AVCConfRecord: Invalid vps type");else V.a.C("FormatError","_parse265AVCConfRecord: Invalid _parse265AVCConfRecord")},u.prototype.di=function(t,i,e,n,s,r,h,o){var a,l,u,f,c,d,v,w,p;if(null!=this.xt)for(a=this.Nt,l=new DataView(t,i,e),u=0,f=this.Ft,c=this.Ut+n,d=1===r;u<e;){if(e<=u+4){V.a._(this.TAG,"Malformed Nalu near timestamp "+c+", offset = "+u+", dataSize = "+e);break}if(v=l.getUint32(u,!a),3===f&&(v>>>=8),e-f<v)return void V.a._(this.TAG,"Malformed Nalus near timestamp "+c+", NaluSize > DataSize!");5!=(w=31&l.getUint8(u+f))&&6!=w||(d=!0),p=t.slice(i+u,i+u+f+v),new Uint8Array(p).set([0,0,0,1]),d&&V.a.y(this.TAG,"recv key frame len="+p.byteLength+",dts="+c),p.byteLength,u+=f+v,this.mt(d?V.a.FRM_TYPE_I:V.a.FRM_TYPE_P,p,p.byteLength,c)}},u.pi=function(t){var i,e,n,s=new Uint8Array(t),r={match:!1};return 70!==s[0]||76!==s[1]||86!==s[2]||1!==s[3]?r:(i=(4&s[4])>>>2!=0,e=0!=(1&s[4]),(n=V.a.S(s,5))<9?r:{match:!0,consumed:n,dataOffset:n,hasAudioTrack:i,hasVideoTrack:e})},u.prototype.mt=function(t,i,e,n){null!=this.mt&&this.mt(t,i,e,n)},p=u,m="download",new function(){var n,o,s,e,r,h,a;self.mi="",self.yi=[],self.Ai=[],self._i=0,self.Ci=!1,self.gi=!0,self.Di=!0,self.q=!0,self.K=!0,self.bi=new d,self.Ei=null,self.Vi=!0,self.Si=-1,self.Ri=null,self.xi=!1,self.Fi=!1,n=function n(t,i,e){return self.Ei.si(t,i,e)},o=function o(t,i,e,n){var s,r,h;if(t==V.a.FRM_TYPE_I||t==V.a.FRM_TYPE_P||t==V.a.FRM_TYPE_V_HEAD){if(!self.q)return}else if((t==V.a.FRM_TYPE_A||t==V.a.FRM_TYPE_A_HEAD)&&!self.K)return;s={type:t,buf:i,len:e,pts:n},r={cmd:V.a.tFrameData,workerId:V.a.WORKER_DOWNLOAD_ID,dat:s},null!=i?(h=new Uint8Array(i),self.postMessage(r,[h.buffer])):self.postMessage(r)},s=function s(n){return n.read().then(function(t){var i,e;if(1==self.Ci)return self.Ci=!1,V.a.y(m,"reader.cancel() 1"),n.cancel(),void h(V.a.tCloseStream);if(t.done)return V.a.y(m,"OnStreamData:tError."),n.cancel(),void h(V.a.tDisconnect);if(1==self.Ci)return self.Ci=!1,V.a.y(m,"reader.cancel() 2"),n.cancel(),void h(V.a.tCloseStream);if(i=t.value.buffer,self.Vi){if(!(e=p.pi(i)).match)return V.a.C(m,"FLVDemuxer.probe failed, no flv file"),n.cancel(),void h(V.a.tCloseStream);self.Ei=new p(e),self.Ei.mt=o,self.Vi=!1,e.consumed<i.byteLength&&self.bi.Zt(i,e.consumed)}else self.bi.Zt(i,0);self.Di,s(n)})["catch"](function(t){return V.a.C(m,"Exception.."+t.message),11===t.code&&Browser.msedge?(V.a._(m,"err e.code === 11 && Browser.msedge"),void h(V.a.tExcept)):(19===t.code||"network error"===t.message?V.a._(m,"network error."):V.a._(m,"loader error."),void h(V.a.tDisconnect))})},e=function e(t){self.Ci=!0,V.a.y(m,"stop["+self.mi+"].")},r=function r(t){self.bi.Wt(),self.Vi=!0,self.bi.G=n,null==self.Ri&&(self.Ri=new AbortController);var i=t;-1!=t.indexOf("/rtmp/")?i=t.replace("/rtmp/","/rtmp/ttxplayer/"):-1==t.indexOf("ttxplayer")&&(i=t+"&ttxplayer=1"),V.a.y(m,"start url="+i),fetch(i,{method:"POST",body:"ttxplayer",signal:self.Ri.signal}).then(function(t){var i;return t.ok&&200<=t.status&&t.status<=299?(null!=(i=t.headers.get("Content-Length"))&&0!==parseInt(i,10)&&(self.Di=!1),h(V.a.tConnecting),s(t.body.getReader())):(V.a.y(m,"startDownload ErrCode: "+t.status+"  Msg: "+t.statusText),1==self.Ci?(self.Ci=!1,void h(V.a.tCloseStream)):403!=t.status&&404!=t.status?(V.a.y(m,"startDownload res.status != 403/404 tDisconnect...."),void h(V.a.tDisconnect)):void e(0))})["catch"](function(t){return 1==self.Ci?(self.Ci=!1,void h(V.a.tCloseStream)):(V.a.y(m,"startDownload Exception Reconnecting....: "+t.message),void(self.Di?V.a.w(3e3).then(function(){h(V.a.tDisconnect)}):h(V.a.tDisconnect)))})},h=function h(t){var i={workerId:V.a.WORKER_DOWNLOAD_ID,cmd:t};self.postMessage(i)},a=function a(){var t={};t.cmd=V.a.tSpeed,t.workerId=V.a.WORKER_DOWNLOAD_ID,t.speed=self.bi.$t(),self.postMessage(t)},self.addEventListener("message",function(t){var i=t.data;switch(i.cmd){case V.a.tOpenStream:self.mi=i.url,self.Di=i.isLive,self.q=i.hasVideo,self.K=i.hasAudio,-1==self.Si&&(self.Si=setInterval(a,1e3)),i.showVer&&V.a._(m,V.a.e),V.a.LOG_LEVEL_CURRENT=i.logLevel,self.xi=i.isAndroid,self.Fi=i.isiOS,(self.xi||self.Fi)&&(V.a.v=1),r(i.url);break;case V.a.tReOpenStream:V.a.y(m,"ReopenStream..."),r(self.mi);break;case V.a.tCloseStream:V.a.y(m,"CloseStream.."),self.Ci=!0,0<=self.Si&&(clearInterval(self.Si),self.Si=-1),null!=self.Ri&&(self.Ri.abort(),self.Ri=null)}V.a.y(m,"message cmd:"+i.cmd)})}}],s.c=n,s.d=function(t,i,e){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(i,t){var e,n;if(1&t&&(i=s(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.__esModule)return i;if(e=Object.create(null),s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(n in i)s.d(e,n,function(t){return i[t]}.bind(null,n));return e},s.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return{}.hasOwnProperty.call(t,i)},s.p="",s(s.s=1);
//# sourceMappingURL=cmsv6.down.worker.js.map